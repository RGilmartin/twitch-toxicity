{"version":3,"file":"webgl_topixels_test.js","sourceRoot":"","sources":["../src/webgl_topixels_test.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;GAeG;AAEH,OAAO,KAAK,EAAE,MAAM,uBAAuB,CAAC;AAC5C,iDAAiD;AACjD,OAAO,EAAC,iBAAiB,EAAC,MAAM,yCAAyC,CAAC;AAG1E,OAAO,EAAC,UAAU,EAAC,MAAM,+BAA+B,CAAC;AAEzD,iBAAiB,CAAC,UAAU,EAAE,UAAU,EAAE,GAAG,EAAE;IAC7C,EAAE,CAAC,sBAAsB,EAAE,KAAK,IAAI,EAAE;QACpC,MAAM,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAM,kBAAkB,GAAI,EAAE,CAAC,MAAM,EAAsB,CAAC,aAAa,CAAC;QAC1E,MAAM,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAE,EAAE,CAAC,MAAM,EAAsB,CAAC,aAAa,CAAC;aACjD,OAAO,CAAC,kBAAkB,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;QAC/D,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAE,OAAO;QAChC,MAAM,kBAAkB,GAAI,EAAE,CAAC,MAAM,EAAsB,CAAC,aAAa,CAAC;QAC1E,MAAM,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,CAAE,EAAE,CAAC,MAAM,EAAsB,CAAC,aAAa,CAAC;aACjD,OAAO,CAAC,kBAAkB,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport * as tf from '@tensorflow/tfjs-core';\n// tslint:disable-next-line: no-imports-from-dist\nimport {describeWithFlags} from '@tensorflow/tfjs-core/dist/jasmine_util';\n\nimport {WebGLMemoryInfo} from './backend_webgl';\nimport {WEBGL_ENVS} from './backend_webgl_test_registry';\n\ndescribeWithFlags('toPixels', WEBGL_ENVS, () => {\n  it('does not leak memory', async () => {\n    const x = tf.tensor2d([[.1], [.2]], [2, 1]);\n    const startNumBytesInGPU = (tf.memory() as WebGLMemoryInfo).numBytesInGPU;\n    await tf.browser.toPixels(x);\n    expect((tf.memory() as WebGLMemoryInfo).numBytesInGPU)\n        .toEqual(startNumBytesInGPU);\n  });\n\n  it('does not leak memory given a tensor-like object', async () => {\n    const x = [[10], [20]];  // 2x1;\n    const startNumBytesInGPU = (tf.memory() as WebGLMemoryInfo).numBytesInGPU;\n    await tf.browser.toPixels(x);\n    expect((tf.memory() as WebGLMemoryInfo).numBytesInGPU)\n        .toEqual(startNumBytesInGPU);\n  });\n});\n"]}